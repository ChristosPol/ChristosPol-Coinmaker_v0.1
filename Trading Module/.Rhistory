by = .(Date, interval)]
rm(list = ls())
options(digits=20)
options(scipen=999)
source(paste("/media/chris/DATA/Documents/Bot_Trading", "10 Utils.R", sep = "/"))
source(paste("/media/chris/DATA/Documents/Bot_Trading/Coinmaker", "10 Utils.R", sep = "/"))
# ------------------------------------------------------------------------------
# Choose pair
pair <- "XETHZEUR"
# Path to save results
data_path <- "/media/chris/DATA/Documents/Bot_Trading/Historical_data"
# Create pair directory
dir.create(paste(data_path, pair, sep ="/"), showWarnings = FALSE)
# Fix path
pair_data_results <- paste(data_path, pair, sep ="/")
# Loading Data for operations --------------------------------------------------
options(digits = 5)
# Csv file saved with historical trades
file <- paste0(paste(pair_data_results, pair, sep = "/"), ".csv")
# Read it
frame <- fread(file)
# # Fix
frame[, Date_POSIXct := anytime(as.numeric(as.character(V3)))]
frame[, Time := strftime(Date_POSIXct, format = "%H:%M:%S")]
colnames(frame) <- c("price", "volume", "epoch_time", "buy_sell", "market_limit",
"miscellaneous", "last_id", "Date_POSIXct", "Time")
frame[, Date := as.Date(Date_POSIXct)]
frame[, Hour := substr(frame$Time, 1,5)]
frame[, miscellaneous := NULL]
# Choose Date Interval
frame1 <- subset(frame, frame$Date >= "2020-01-01")
frame1 <- unique(frame1)
rm(frame)
Kraken_intervals <- c("15 minutes") #, "30 minutes", "1 hour", "2 hour")
candle_list <- list()
for (i in 1:length(Kraken_intervals)) {
frame1$interval <- strftime(ceiling_date(as.POSIXct(frame1$Date_POSIXct), Kraken_intervals[i]) , format = '%H:%M:%S')
candles <- copy(frame1)
candle_list[[i]] <- candles[, .(high = max(price), low = min(price), open = first(price),
close = last(price), volume = sum(volume)),
by = .(Date, interval)]
}
rm(candles)
rm(frame1)
# testing parameters
test_fast <- c(seq(5, 75, by = 5))
test_slow <- c(seq(20, 150, by = 10))
testing_params <- data.frame(f = rep(test_fast, length(test_slow)), s = rep(test_slow, each = length(test_fast)))
testing_params
testing_params$flag <- 1
testing_params$flag <- 1
testing_params
data.frame(tf = c(0.2,0.8), flag = 1)
data.frame(rsi_period = c(5, 10, 15, 20), flag = 1)
rss <- data.frame(rsi_period = c(5, 10, 15, 20), flag = 1)
rsi_p <- data.frame(rsi_period = c(5, 10, 15, 20), flag = 1)
upper <- data.frame(rsi_period = c(60, 65, 70, 75, 80), flag = 1)
upper
lower <- data.frame(low = c(40, 35, 30, 25, 20), flag = 1)
lower
tr <- data.frame(low = c(30, 70, 120, 150, 100), flag = 1)
tr
tr <- data.frame(tr = c(30, 70, 120, 150, 100), flag = 1)
tr_per <- data.frame(tr = c(10, 30, 50, 100), flag = 1)
tr_per
testing_params <- left_join(testing_params, rsi_p) %>% left_join(upper) %>%
left_join(lower) %>% left_join(tr) %>% left_join(tr)
# testing parameters
test_fast <- c(seq(5, 75, by = 5))
test_slow <- c(seq(20, 150, by = 10))
testing_params <- data.frame(f = rep(test_fast, length(test_slow)), s = rep(test_slow, each = length(test_fast)))
testing_params$flag <- 1
rsi_p <- data.frame(rsi_period = c(5, 10, 15, 20), flag = 1)
upper <- data.frame(up = c(60, 65, 70, 75, 80), flag = 1)
lower <- data.frame(low = c(40, 35, 30, 25, 20), flag = 1)
tr <- data.frame(tr = c(30, 70, 120, 150, 100), flag = 1)
tr_per <- data.frame(tr_per = c(10, 30, 50, 100), flag = 1)
testing_params <- left_join(testing_params, rsi_p) %>% left_join(upper) %>%
left_join(lower) %>% left_join(tr) %>% left_join(tr)
est_fast <- c(seq(5, 75, by = 5))
test_slow <- c(seq(20, 150, by = 10))
testing_params <- data.frame(f = rep(test_fast, length(test_slow)), s = rep(test_slow, each = length(test_fast)))
testing_params$flag <- 1
rsi_p <- data.frame(rsi_period = c(5, 10, 15, 20), flag = 1)
upper <- data.frame(up = c(60, 65, 70, 75, 80), flag = 1)
lower <- data.frame(low = c(40, 35, 30, 25, 20), flag = 1)
tr <- data.frame(tr = c(30, 70, 120, 150, 100), flag = 1)
tr_per <- data.frame(tr_per = c(10, 30, 50, 100), flag = 1)
testing_params <- left_join(testing_params, rsi_p) %>% left_join(upper) %>%
left_join(lower) %>% left_join(tr) %>% left_join(tr_per)
testing_params
# View(testing_params)
testing_params$flag <- NULL
testing_params$bool <- testing_params$f < testing_params$s
testing_params <- subset(testing_params, testing_params$bool == T)
View(testing_params)
# testing parameters
test_fast <- c(seq(5, 30, by = 5))
test_fast
test_slow <- c(seq(40, 100, by = 10))
test_slow
testing_params <- data.frame(f = rep(test_fast, length(test_slow)), s = rep(test_slow, each = length(test_fast)))
testing_params
testing_params$flag <- 1
rsi_p <- data.frame(rsi_period = c(5, 15, 25), flag = 1)
rsi_p <- data.frame(rsi_period = c(5, 15, 25), flag = 1)
upper <- data.frame(up = c(60, 70, 80), flag = 1)
lower <- data.frame(low = c(40, 30, 20), flag = 1)
tr <- data.frame(tr = c(30, 70, 120, 200), flag = 1)
tr_per <- data.frame(tr_per = c(30, 100), flag = 1)
testing_params <- left_join(testing_params, rsi_p) %>% left_join(upper) %>%
left_join(lower) %>% left_join(tr) %>% left_join(tr_per)
testing_params$flag <- NULL
testing_params$bool <- testing_params$f < testing_params$s
testing_params <- subset(testing_params, testing_params$bool == T)
View(testing_params)
frame1
View(candle_list)
# N Training -------------------------------------------------------------------
train_n <- ceiling(nrow(candle_list[[1]]) / 3)
train_n
train_data <- candle_list[[1]][1:train_n, ]
# Test, same -------------------------------------------------------------------
test_data <- candle_list[[1]][(train_n + 1):nrow(candle_list[[1]]), ]
test_data
initial_budget <- 500
vol <- data.frame(vol = c(5, 20, 40), flag = 1)
testing_params <- left_join(testing_params, rsi_p) %>% left_join(upper) %>%
left_join(lower) %>% left_join(tr) %>% left_join(tr_per)%>% left_join(vol)
# testing parameters
test_fast <- c(seq(5, 30, by = 5))
test_slow <- c(seq(40, 100, by = 10))
testing_params <- data.frame(f = rep(test_fast, length(test_slow)), s = rep(test_slow, each = length(test_fast)))
testing_params$flag <- 1
rsi_p <- data.frame(rsi_period = c(5, 15, 25), flag = 1)
upper <- data.frame(up = c(60, 70, 80), flag = 1)
lower <- data.frame(low = c(40, 30, 20), flag = 1)
tr <- data.frame(tr = c(30, 70, 120, 200), flag = 1)
tr_per <- data.frame(tr_per = c(30, 100), flag = 1)
vol <- data.frame(vol = c(5, 20, 40), flag = 1)
testing_params <- left_join(testing_params, rsi_p) %>% left_join(upper) %>%
left_join(lower) %>% left_join(tr) %>% left_join(tr_per)%>% left_join(vol)
testing_params$flag <- NULL
testing_params$bool <- testing_params$f < testing_params$s
testing_params <- subset(testing_params, testing_params$bool == T)
View(testing_params)
# N Training -------------------------------------------------------------------
train_n <- ceiling(nrow(candle_list[[1]]) / 3)
train_data <- candle_list[[1]][1:train_n, ]
# Test, same -------------------------------------------------------------------
test_data <- candle_list[[1]][(train_n + 1):nrow(candle_list[[1]]), ]
initial_budget <- 500
myresult <- list()
for (i in 1:nrow(testing_params)){
myresult[[i]] <- RSI_Swings(fast_EMA = testing_params$f[i], slow_EMA = testing_params$s[i], Volume_EMA = testing_params$vol[i], RSI_Period = testing_params$rsi_period[i],
upper_RSI_Bound = testing_params$up[i], lower_RSI_Bound = testing_params$low[i], stoploss = 0.01, trend = testing_params$tr[i],
trend_periods = testing_params$tr_per[i])
print(i/nrow(testing_params))
}
# testing parameters
test_fast <- c(seq(5, 30, by = 5))
test_slow <- c(seq(40, 100, by = 10))
test_fast <- 14
test_slow <- 65
testing_params <- data.frame(f = rep(test_fast, length(test_slow)), s = rep(test_slow, each = length(test_fast)))
testing_params
testing_params$flag <- 1
rsi_p <- data.frame(rsi_period = c(5, 15, 25), flag = 1)
upper <- data.frame(up = c(60, 70, 80), flag = 1)
lower <- data.frame(low = c(40, 30, 20), flag = 1)
tr <- data.frame(tr = c(30, 70, 120, 200), flag = 1)
tr_per <- data.frame(tr_per = c(30, 100), flag = 1)
vol <- data.frame(vol = c(5, 20, 40), flag = 1)
testing_params <- left_join(testing_params, rsi_p) %>% left_join(upper) %>%
left_join(lower) %>% left_join(tr) %>% left_join(tr_per)%>% left_join(vol)
testing_params$flag <- NULL
testing_params$bool <- testing_params$f < testing_params$s
testing_params <- subset(testing_params, testing_params$bool == T)
testing_params
# N Training -------------------------------------------------------------------
train_n <- ceiling(nrow(candle_list[[1]]) / 3)
train_data <- candle_list[[1]][1:train_n, ]
# Test, same -------------------------------------------------------------------
test_data <- candle_list[[1]][(train_n + 1):nrow(candle_list[[1]]), ]
initial_budget <- 500
myresult <- list()
for (i in 1:nrow(testing_params)){
myresult[[i]] <- RSI_Swings(fast_EMA = testing_params$f[i], slow_EMA = testing_params$s[i], Volume_EMA = testing_params$vol[i], RSI_Period = testing_params$rsi_period[i],
upper_RSI_Bound = testing_params$up[i], lower_RSI_Bound = testing_params$low[i], stoploss = 0.01, trend = testing_params$tr[i],
trend_periods = testing_params$tr_per[i])
print(i/nrow(testing_params))
}
myresult
length(myresult)
res <- list()
for( i in 1:length(myresult)){
res[[i]] <- calculate_profits(myresult[[i]])
}
final <- do.call(rbind, res)
final$params <- NULL
final_15min <- cbind(final, testing_params[1:length(myresult),])
final_15min$fees <- 1.5 *final_15min$n_trades
final_15min$clean_profit <- final_15min$profit- final_15min$fees
View(final_15min)
# Check all jobs
cron_ls()
# Description ------------------------------------------------------------------
# Scheduler for trading at the end of each candle and not intra-candle
library(cronR)
# Check all jobs
cron_ls()
rm(list = ls())
source(paste("/media/chris/DATA/Documents/Bot_Trading/Coinmaker_v0.1", "10 Utils.R", sep = "/"))
setDTthreads(1)
# API info
api_info <- read.table(paste("/media/chris/DATA/Documents/Bot_Trading", "API_Keys.txt", sep = "/"), sep = ";", header = T)
API_Key <- as.character(api_info$API_Key)
API_Sign <- as.character(api_info$API_Sign)
# Choose pair
pair <- "BTCEUR"
# Path to save results0
data_path <- "/media/chris/DATA/Documents/Bot_Trading/Historical_data"
# Create pair directory
dir.create(paste(data_path, pair, sep ="/"), showWarnings = FALSE)
# Fix path
pair_data_results <- paste(data_path, pair, sep ="/")
# Loading Data for operations --------------------------------------------------
options(digits = 5)
# Csv file saved with historical trades
file <- paste0(paste(pair_data_results, pair, sep = "/"), ".csv")
# Read it
frame <- fread(file)
# # Fix
frame[, Date_POSIXct := anytime(as.numeric(as.character(V3)))]
frame[, Time := strftime(Date_POSIXct, format = "%H:%M:%S")]
colnames(frame) <- c("price", "volume", "epoch_time", "buy_sell", "market_limit",
"miscellaneous", "last_id", "Date_POSIXct", "Time")
frame[, Date := as.Date(Date_POSIXct)]
frame[, Hour := substr(frame$Time, 1,5)]
frame[, miscellaneous := NULL]
# frame1 <- subset(frame1, frame1$Date >= "2019-12-01" & frame1$Date <= "2020-06-01")
frame1 <- subset(frame1, frame1$Date >= "2019-04-01")
# Select interval
frame1[, interval := strftime(ceiling_date(as.POSIXct(Date_POSIXct), '60 minutes') , format = '%H:%M:%S')]
# Create candle stick dataset
candles <- frame1[, .(high = max(price), low = min(price), open = first(price),
close = last(price), volume = sum(volume)),
by = .(Date, interval)]
dim(candles)
rm(list = ls())
source(paste("/media/chris/DATA/Documents/Bot_Trading/Coinmaker_v0.1", "10 Utils.R", sep = "/"))
setDTthreads(1)
# API info
api_info <- read.table(paste("/media/chris/DATA/Documents/Bot_Trading", "API_Keys.txt", sep = "/"), sep = ";", header = T)
API_Key <- as.character(api_info$API_Key)
API_Sign <- as.character(api_info$API_Sign)
# Choose pair
pair <- "BTCEUR"
# Path to save results0
data_path <- "/media/chris/DATA/Documents/Bot_Trading/Historical_data"
# Create pair directory
dir.create(paste(data_path, pair, sep ="/"), showWarnings = FALSE)
# Fix path
pair_data_results <- paste(data_path, pair, sep ="/")
# Loading Data for operations --------------------------------------------------
options(digits = 5)
# Csv file saved with historical trades
file <- paste0(paste(pair_data_results, pair, sep = "/"), ".csv")
# Read it
frame <- fread(file)
# # Fix
frame[, Date_POSIXct := anytime(as.numeric(as.character(V3)))]
frame[, Time := strftime(Date_POSIXct, format = "%H:%M:%S")]
colnames(frame) <- c("price", "volume", "epoch_time", "buy_sell", "market_limit",
"miscellaneous", "last_id", "Date_POSIXct", "Time")
frame[, Date := as.Date(Date_POSIXct)]
frame[, Hour := substr(frame$Time, 1,5)]
frame[, miscellaneous := NULL]
frame1 <- unique(frame)
# frame1 <- subset(frame1, frame1$Date >= "2019-12-01" & frame1$Date <= "2020-06-01")
frame1 <- subset(frame1, frame1$Date >= "2019-04-01")
# Select interval
frame1[, interval := strftime(ceiling_date(as.POSIXct(Date_POSIXct), '60 minutes') , format = '%H:%M:%S')]
# Create candle stick dataset
candles <- frame1[, .(high = max(price), low = min(price), open = first(price),
close = last(price), volume = sum(volume)),
by = .(Date, interval)]
dim(candles)
# # Testing strategies ------------------------------------------------------------
paraller_exec <- FALSE
# Badget
initial_budget <- 500
# select period of data
candles_recent <- candles
#
# training data here is not the traditional training set, but more of a
# placeholder initial dataset to calculate the indicators
train_n <- ceiling(nrow(candles_recent) / 30)
train_data <- candles_recent[1:train_n, ]
test_data <- candles_recent[(train_n + 1):nrow(candles_recent), ]
myresult <- Splines_Tangent(spar = 0.95,
takeprofit = 0.015,
stoploss_trail = 1,
stoploss_ult = 1,
plot.it = F)
calculate_profits(myresult)
win_ratio(myresult)
rm(list = ls())
source(paste("/media/chris/DATA/Documents/Bot_Trading/Coinmaker_v0.1", "10 Utils.R", sep = "/"))
setDTthreads(1)
# API info
api_info <- read.table(paste("/media/chris/DATA/Documents/Bot_Trading", "API_Keys.txt", sep = "/"), sep = ";", header = T)
API_Key <- as.character(api_info$API_Key)
API_Sign <- as.character(api_info$API_Sign)
# Choose pair
# pair <- "BTCEUR"
pair <- "XETHZEUR"
# Path to save results0
data_path <- "/media/chris/DATA/Documents/Bot_Trading/Historical_data"
# Create pair directory
dir.create(paste(data_path, pair, sep ="/"), showWarnings = FALSE)
# Fix path
pair_data_results <- paste(data_path, pair, sep ="/")
# Loading Data for operations --------------------------------------------------
options(digits = 5)
# Csv file saved with historical trades
file <- paste0(paste(pair_data_results, pair, sep = "/"), ".csv")
# Read it
frame <- fread(file)
# # Fix
frame[, Date_POSIXct := anytime(as.numeric(as.character(V3)))]
frame[, Time := strftime(Date_POSIXct, format = "%H:%M:%S")]
colnames(frame) <- c("price", "volume", "epoch_time", "buy_sell", "market_limit",
"miscellaneous", "last_id", "Date_POSIXct", "Time")
frame[, Date := as.Date(Date_POSIXct)]
frame[, Hour := substr(frame$Time, 1,5)]
frame[, miscellaneous := NULL]
frame1 <- unique(frame)
# frame1 <- subset(frame1, frame1$Date >= "2019-12-01" & frame1$Date <= "2020-06-01")
frame1 <- subset(frame1, frame1$Date >= "2019-04-01")
# Select interval
frame1[, interval := strftime(ceiling_date(as.POSIXct(Date_POSIXct), '60 minutes') , format = '%H:%M:%S')]
# Create candle stick dataset
candles <- frame1[, .(high = max(price), low = min(price), open = first(price),
close = last(price), volume = sum(volume)),
by = .(Date, interval)]
dim(candles)
# # Testing strategies ------------------------------------------------------------
paraller_exec <- FALSE
# Badget
initial_budget <- 500
# select period of data
candles_recent <- candles
#
# training data here is not the traditional training set, but more of a
# placeholder initial dataset to calculate the indicators
train_n <- ceiling(nrow(candles_recent) / 30)
train_data <- candles_recent[1:train_n, ]
test_data <- candles_recent[(train_n + 1):nrow(candles_recent), ]
myresult <- Splines_Tangent(spar = 0.95,
takeprofit = 0.015,
stoploss_trail = 1,
stoploss_ult = 1,
plot.it = F)
calculate_profits(myresult)
win_ratio(myresult)
# Close last position
if(myresult$action[nrow(myresult)] == "keep") {
myresult$action[nrow(myresult)] <- "sell"
myresult$Price[nrow(myresult)] <- myresult$close[nrow(myresult)] * myresult$Units[nrow(myresult)]
}
calculate_profits(myresult)
win_ratio(myresult)
# # Testing strategies ------------------------------------------------------------
paraller_exec <- FALSE
# Badget
initial_budget <- 500
# select period of data
candles_recent <- candles
#
# training data here is not the traditional training set, but more of a
# placeholder initial dataset to calculate the indicators
train_n <- ceiling(nrow(candles_recent) / 30)
train_data <- candles_recent[1:train_n, ]
test_data <- candles_recent[(train_n + 1):nrow(candles_recent), ]
myresult <- Splines_Tangent(spar = 0.95,
takeprofit = 0.015,
stoploss_trail = 1,
stoploss_ult = 1,
plot.it = T)
# Check all jobs
cron_ls()
# Check all jobs
cron_ls()
# Stop Job
# cron_clear(ask = FALSE)
cron_rm(id = "Live trading")
trading_table_path <- "/media/chris/DATA/Documents/Bot_Trading/Coinmaker_v0.1/Trading Module/Trading_Table/"
dirs <- list.files(trading_table_path, full.names = T)
pair_names <- gsub("_table.csv", "",list.files(trading_table_path))
trade_tables <- lapply(dirs, function(x){read.table(x, header = FALSE,
sep = ",", stringsAsFactors = FALSE)}  )
names(trade_tables) <- pair_names
columns <- c("time", "open", "high", "low", "close",
"vwap", "volume", "count", "Date_POSIXct", "servertime",
"systemtime", "x", "spline", "deriv", "sign_derivs",
"change_sign", "exit_condition", "action", "Units", "Price",
"tp", "ult_sl", "trail_sl", "id" )
trade_tables <- lapply(trade_tables, setNames, columns)
for(i in 1:length(trade_tables)){
trade_tables[[i]]$pair <- pair_names[i]
}
all_trade_tables <- do.call(rbind, trade_tables)
all_trade_tables$Price_all <- all_trade_tables$close*all_trade_tables$Units
rownames(all_trade_tables) <- NULL
View(all_trade_tables)
trading_table_path <- "/media/chris/DATA/Documents/Bot_Trading/Coinmaker_v0.1/Trading Module/Trading_Table/"
dirs <- list.files(trading_table_path, full.names = T)
pair_names <- gsub("_table.csv", "",list.files(trading_table_path))
trade_tables <- lapply(dirs, function(x){read.table(x, header = FALSE,
sep = ",", stringsAsFactors = FALSE)}  )
names(trade_tables) <- pair_names
columns <- c("time", "open", "high", "low", "close",
"vwap", "volume", "count", "Date_POSIXct", "servertime",
"systemtime", "x", "spline", "deriv", "sign_derivs",
"change_sign", "exit_condition", "action", "Units", "Price",
"tp", "ult_sl", "trail_sl", "id" )
trade_tables <- lapply(trade_tables, setNames, columns)
for(i in 1:length(trade_tables)){
trade_tables[[i]]$pair <- pair_names[i]
}
all_trade_tables <- do.call(rbind, trade_tables)
all_trade_tables$Price_all <- all_trade_tables$close*all_trade_tables$Units
rownames(all_trade_tables) <- NULL
View(all_trade_tables)
View(all_trade_tables)
trading_table_path <- "/media/chris/DATA/Documents/Bot_Trading/Coinmaker_v0.1/Trading Module/Trading_Table/"
dirs <- list.files(trading_table_path, full.names = T)
pair_names <- gsub("_table.csv", "",list.files(trading_table_path))
trade_tables <- lapply(dirs, function(x){read.table(x, header = FALSE,
sep = ",", stringsAsFactors = FALSE)}  )
names(trade_tables) <- pair_names
columns <- c("time", "open", "high", "low", "close",
"vwap", "volume", "count", "Date_POSIXct", "servertime",
"systemtime", "x", "spline", "deriv", "sign_derivs",
"change_sign", "exit_condition", "action", "Units", "Price",
"tp", "ult_sl", "trail_sl", "id" )
trade_tables <- lapply(trade_tables, setNames, columns)
for(i in 1:length(trade_tables)){
trade_tables[[i]]$pair <- pair_names[i]
}
all_trade_tables <- do.call(rbind, trade_tables)
all_trade_tables$Price_all <- all_trade_tables$close*all_trade_tables$Units
rownames(all_trade_tables) <- NULL
View(all_trade_tables)
trading_table_path <- "/media/chris/DATA/Documents/Bot_Trading/Coinmaker_v0.1/Trading Module/Trading_Table/"
dirs <- list.files(trading_table_path, full.names = T)
pair_names <- gsub("_table.csv", "",list.files(trading_table_path))
trade_tables <- lapply(dirs, function(x){read.table(x, header = FALSE,
sep = ",", stringsAsFactors = FALSE)}  )
names(trade_tables) <- pair_names
columns <- c("time", "open", "high", "low", "close",
"vwap", "volume", "count", "Date_POSIXct", "servertime",
"systemtime", "x", "spline", "deriv", "sign_derivs",
"change_sign", "exit_condition", "action", "Units", "Price",
"tp", "ult_sl", "trail_sl", "id" )
trade_tables <- lapply(trade_tables, setNames, columns)
for(i in 1:length(trade_tables)){
trade_tables[[i]]$pair <- pair_names[i]
}
all_trade_tables <- do.call(rbind, trade_tables)
all_trade_tables$Price_all <- all_trade_tables$close*all_trade_tables$Units
rownames(all_trade_tables) <- NULL
View(all_trade_tables)
trading_table_path <- "/media/chris/DATA/Documents/Bot_Trading/Coinmaker_v0.1/Trading Module/Trading_Table/"
dirs <- list.files(trading_table_path, full.names = T)
pair_names <- gsub("_table.csv", "",list.files(trading_table_path))
trade_tables <- lapply(dirs, function(x){read.table(x, header = FALSE,
sep = ",", stringsAsFactors = FALSE)}  )
names(trade_tables) <- pair_names
columns <- c("time", "open", "high", "low", "close",
"vwap", "volume", "count", "Date_POSIXct", "servertime",
"systemtime", "x", "spline", "deriv", "sign_derivs",
"change_sign", "exit_condition", "action", "Units", "Price",
"tp", "ult_sl", "trail_sl", "id" )
trade_tables <- lapply(trade_tables, setNames, columns)
for(i in 1:length(trade_tables)){
trade_tables[[i]]$pair <- pair_names[i]
}
all_trade_tables <- do.call(rbind, trade_tables)
all_trade_tables$Price_all <- all_trade_tables$close*all_trade_tables$Units
rownames(all_trade_tables) <- NULL
View(all_trade_tables)
trading_table_path <- "/media/chris/DATA/Documents/Bot_Trading/Coinmaker_v0.1/Trading Module/Trading_Table/"
dirs <- list.files(trading_table_path, full.names = T)
pair_names <- gsub("_table.csv", "",list.files(trading_table_path))
trade_tables <- lapply(dirs, function(x){read.table(x, header = FALSE,
sep = ",", stringsAsFactors = FALSE)}  )
names(trade_tables) <- pair_names
columns <- c("time", "open", "high", "low", "close",
"vwap", "volume", "count", "Date_POSIXct", "servertime",
"systemtime", "x", "spline", "deriv", "sign_derivs",
"change_sign", "exit_condition", "action", "Units", "Price",
"tp", "ult_sl", "trail_sl", "id" )
trade_tables <- lapply(trade_tables, setNames, columns)
for(i in 1:length(trade_tables)){
trade_tables[[i]]$pair <- pair_names[i]
}
all_trade_tables <- do.call(rbind, trade_tables)
all_trade_tables$Price_all <- all_trade_tables$close*all_trade_tables$Units
rownames(all_trade_tables) <- NULL
View(all_trade_tables)
